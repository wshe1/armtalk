{% extends "base.html" %}
{% block title %}首页{% endblock %}
{% block css %} /static/styles/pages/index.css{% endblock %}
{% block content %}
<div class="page-main clearfix">
    {% for image in images %}
    <article class="mod">
        <header class="mod-hd">
            <time class="time">{{ image.created_date }}</time>
            <a href="/profile/{{ image.user.id }}" class="avatar">
                <img src="{{ image.user.head_url }}">
            </a>
            <div class="profile-info">
                <a title="{{ image.user.username }}" href="/profile/{{ image.user.id }}">{{ image.user.username }}</a>
            </div>
        </header>
        <div class="mod-bd">
            <div class="img-box">
                <a href="/image/{{ image.id }}/">
                <img src="{{ image.url }}"></a>
            </div>
        </div>
        <div class="mod-ft">
            <!--
            <section class="times">
                <span></span>
                <span>6.2百万</span>
                <span> 次播放</span>
            </section>-->
            <ul class="discuss-list">
                <!--
                <li>
                    <h1>
                        <a>toutvadisparaitre</a>
                        <span data-reactid=".0.1.0.0.0.2.1.0.0.1">
                            <span data-reactid=".0.1.0.0.0.2.1.0.0.1.0">和朋友吐一吐是解忧最佳</span>
                        </span>
                    </h1>
                </li>
                <li>
                    <a>scottiecosmos</a>
                    <span>
                        <span>That's what i call "awesomeness"</span>
                    </span>
                </li>
                -->
                <li class="more-discuss">
                    <a>
                        <span>全部 </span><span class="">{{ image.comments | length }}</span>
                        <span> 条评论</span></a>
                </li>
                {% for comment in image.comments %}

                    {% if loop.index>2 %}{% break %}{% endif %}
                <li>
                    <!--
                    <a class=" icon-remove" title="删除评论"></a>
                    -->
                    <a class="_4zhc5 _iqaka" title="{{ comment.user.username }}" href="/profile/{{ comment.user.id }}" data-reactid=".0.1.0.0.0.2.1.2:$comment-17856951190001917.1">{{ comment.user.username }}</a>
                    <span>
                        <span>{{ comment.content }}</span>
                    </span>
                </li>
                {% endfor%}
            </ul>
            <section class="discuss-edit">
                <a class="icon-heart"></a>
                <form>
                    <input placeholder="添加评论..." type="text">
                </form>
                <button class="more-info">更多选项</button>
            </section>
        </div>
    </article>
    {% endfor %}
<ul id="menu">
    <li>
    <!--  	上一页的分页对象 -->
        <a href="{% if pagination.has_prev %}{{url_for('index',page=1)}}{% else %}{% endif %}" >首页</a>
    </li>
    <li>
        <a href="{% if pagination.has_prev %}{{url_for('index',page=pagination.page-1)}}{% else %}{% endif %}" >«</a>
    </li>
 <!-- 一个迭代器，返回选中当前页时显示的页数列表。如这个例子中最左边显示2个页数，当前页的左边显示2个页数，当前页的右边显示5个页数而当前页的最右边显示2个页数 -->
        {% for p in pagination.iter_pages() if page-2<=p<=page+2%}

            <li>
            <a href="{{ url_for('index',page=p)}}">{{p}}</a>
            </li>

        {% endfor %}
    <li>
    <!--  	下一页的分页对象 -->
        <a href="{%if pagination.has_next %}{{url_for('index',page=pagination.page+1)}}{% else %}{% endif %}" >»</a>

    </li>
    <li>
        <a href="{%if pagination.has_next %}{{url_for('index',page=pagination.pages)}}{% else %}{% endif %}" >尾页</a>

    </li>
</ul>
</div>
{% endblock %}
